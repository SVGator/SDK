(()=>{var t={143:(t,e,n)=>{const o=n(931);t.exports=class{static async auth(t,e,n){if(n=n?n.replace(/\/+$/,""):"https://app.svgator.com/app-auth",!e)return await o.open(t,n);let a=new URLSearchParams;a.append("redirect",e),a.append("appId",t);let i=n+"/connect?"+a.toString();return window.open(i,"_self")}static async oauth(t,e,n=300){e=e?e.replace(/\/+$/,""):"https://app.svgator.com";const a=await o.getOauth(t,e);if(!a?.oauth?.writer)throw new Error("Unable to initiate oauth!");const{oauth:i}=a;return await o.open(t,e+"/app-auth",i.writer),await o.waitOauth(t,e,i.id,n)}}},931:t=>{class e{static windowOptions(){let t={top:100,left:100,width:500,height:700,menu:0};return Object.keys(t).map((e=>e+"="+t[e])).join(",")}static async getOauth(t,e){let n=e+"/api/svgator/oauth?action=create&appId="+encodeURIComponent(t);const o=await fetch(n);return await o.json()}static async waitOauth(t,e,n,o){const a=(new Date).getTime();let i=null;do{const r=((new Date).getTime()-a)/1e3,c=Math.max(0,Math.round(o-r));let s=e+"/api/svgator/oauth?action=read&oauthId="+encodeURIComponent(n);t&&(s+="&appId="+encodeURIComponent(t)),c>0&&(s+="&timeout="+c);try{const t=await fetch(s);i=await t.json()}catch(t){}}while((new Date).getTime()-a<1e3*o&&"pending"===i?.status);return i}static open(t,n,o){return new Promise((function(a,i){let r,c=!1;function s(t){c||(c=!0,r&&(clearInterval(r),r=!1),setTimeout((function(){a(t)}),0))}function p(t){c||(c=!0,r&&(clearInterval(r),r=!1),setTimeout((function(){i(t)}),0))}try{let a=n+"/connect?appId="+encodeURIComponent(t)+"&origin="+encodeURIComponent(window.origin);o&&(a+="&oauth_writer="+encodeURIComponent(o));let i=window.open(a,"_blank",e.windowOptions());o&&s("Process started"),r=setInterval((function(){i&&!i.closed||p({code:-4,msg:"Authorization page closed"})}),100),window.addEventListener("message",(function(t){let e;try{e=JSON.parse(t.data)}catch(t){return}if(e&&(e.code||e.msg))try{e.code?p(e):s(e.msg)}catch(t){p({code:-2,msg:t})}}))}catch(t){p({code:-1,msg:t})}}))}}t.exports=e}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();const o=n(143);let a={};"undefined"!=typeof self&&(a=self),"undefined"!=typeof window?a=window:void 0!==n.g&&(a=n.g);let i=a.SVGator;o.noConflict=function(){return a.SVGator=i,o},a.SVGator=o})();